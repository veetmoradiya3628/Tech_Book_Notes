
##### Overview
- Where can we find Distributed Systems ?
	- Distributed systems are everywhere!
	- Every time we:
		- watch a movie on demand
		- shop online
		- order a ride share service through our mobile phone
		- search for something online
- Why Distributed Systems ?
	- Those companies are running highly scalable distributed systems in order to:
		- handle millions of users
		- Petabytes of data
		- Provide consistent user experience
- The Cloud and Distributed Systems
	- Even the simplest web site is running on a distributed system
	- Cloud (AWS, Azure, GCP,...) is a distributed system designed for companies and SW developers
- The virtues of a Distributed System
	- You are not aware of the complexities of the system
	- It just works!
	- Feels like a single machine
	- Dedicated specifically for you
- The problem with centralized systems
	- Vertical scaling limited
	- Single point of failure
	- High latency - poor user experience
	- Security and privacy
	- Solution :- Distributed system
- Definition :- 
	- *A Distributed system is a system of several processes running on different computers, communicating with each other through the network, and are sharing a state or are working together to achieve a common goal*
- No common goal, not a distributed systems

##### Cluster Coordination Service and Distributed Algorithms
- Node
	- A process running on a dedicated machine
- Cluster
	- Collection of computers / nodes connected to each other.
- Challenges of Master-Workers architecture
	- Automatic and system leader election is not a trivial task to solve, even among people.
	- Arriving to an agreement on a leader in a large cluster of nodes is even harder.
	- By default each node knows only about itself - service registry and discovery is required
	- Failure detection mechanism is necessary to trigger automatic leader reelection in a cluster
- Apache Zookeeper
	- high performance coordination service designed specifically for distributed systems.
- Zookeeper abstraction and data model
	- Znodes
		- Persistent 
		- Ephemeral
- Leader election algorithm

- Install, setup and use zookeeper command line client tool for visualization and debugging
- Zookeeper threading model for client library
	- Two threads gets created
		- Event thread
		- IO thread

- Watchers and triggers
	- The watcher allows us to get a notification when a change happens.
- The Herd Effect
	- Try to avoid having this in our algorithm
- Failure detection with Zookeeper
- Leader Re-election Algorithm
- Use subscription, event driven architecture to detect failures in the cluster
- Fault tolerance
	- Re elect a new leader automatically
- Should be horizontal scalable
	- Grow on demand


- Service Discovery & Registry
	- Dynamic configuration
	- Service Registry with Zookeeper
		- Peer to peer communication
	- Apache Zookeeper is used by many companies and projects for service discovery in production
	- There are many other technologies that offer comparable capabilities
		- etcd
		- consul
		- Netflix Eureka etc
	-  Automated service discovery allows the system to be dynamic as nodes can be added to removed at any point.

- Network Communication
	- Multithreading - shared memory (locks + semaphores) for communication
	- Distributed systems - Network communication
	- TCP/IP model
		- Data Link layer
			- physical data delivery
			- Ethernet Protocol
		- Internet layer
		- Transport layer
			- UDP
			- TCP
		- Application
			- FTP 
			- SMTP
			- DNS
			- HTTP
	- Data packaging and serialization, de-serialization
	- HTTP Protocol
		- Hypertext Transfer Protocol
		- Request - Response
		- Request structure
			- method - GET, HEAD, POST, PUT, DELETE etc.
			- path
			- protocol version
			- headers
			- body (optional)
		- Response structure
			- status code - 1xx, 2xx, 3xx etc
			- response header
			- response message
- Sync communication, Async communication
- Completable future & connection pooling (support on HTTP2.0)

- Message delivery semantics
	- Server Failure scenarios
	- At most once semantics
		- The client send a request to the server only once
		- Use cases
			- Messages to a logging or monitoring service
			- Sending promotional messages and it's not worth redelivery
	- At least once semantics
		- If client does not receive a response it will resend the request
		- Works well for idempotent operations
	- idempotents operations
		- Operation performed multiple times having same effect or same behavior as an single time performed.
		- Making some non-idempotent operations, idempotent is hard.
- Complex Data Delivery - Serialization & Deserialization
	- Serialization Formats
		- JSON
			- If we want something human readable, language independent with native support in browser we would prefer this.
		- Java Object Serialization
			- If we want something simple, fast to develop with native JVM support we would go for Standard Java Object Serialization
		- Protocol Buffer
			- If performance, bandwidth and security are more important to us

##### Distributed Document Search
- List of documents, sorted by relevance
- Search algorithms
	- Word count of the search terms
		- problem: The algorithm favors larger documents
		- To solve this we may consider term frequency in document
		- TF-IDF Algorithm
			- Term Frequency - Inverse Document Frequency (tf-idf)
			- statistical algorithm
			- Works well with large number of documents
- Data Partitioning
	- Problems Dimensions
		- D - Number of documents
		- T - Number of search terms
	- Deciding how to parallelize the workload, its critical
	- here documents are expected to grow so will go by parallelizing documents divide.
- Parallel Term Frequency Calculation

##### Load Balancing

##### Hands on
- Election and re election algorithm in distributed systems
	- Watch predecessor znode algorithm
- Auto-header using Zookeeper
- implement fully automated service registry and discovery using zookeeper.
- Build Multi threaded Http Webserver & Client in core Java
- Have hands on with JSON, Java Object Serialization, Protobuff
- Implement distributed search using TF-IDF algorithm with all component from scratch & do some hands on within this area